<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Guide R pour Motus</title>
  <meta name="description" content="Guide R pour Motus">
  <meta name="generator" content="bookdown 0.6 and GitBook 2.6.7">

  <meta property="og:title" content="Guide R pour Motus" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="BSC_Motus_Logo.png" />
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Guide R pour Motus" />
  
  
  <meta name="twitter:image" content="BSC_Motus_Logo.png" />

<meta name="author" content="Tara L. Crewe, Zoe Crysler, et Philip Taylor">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="accessingData.html">
<link rel="next" href="dataCleaning.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Guide R pour Motus</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Utilisation du langage R appliqué aux données du réseau de radiotélémétrie automatisée Motus</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#whatBookCovers"><i class="fa fa-check"></i><b>1.1</b> Ce que le présent guide ne montre pas</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Connaissances préalables</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#sampleData"><i class="fa fa-check"></i><b>1.3</b> Ensemble de données utilisées comme exemples</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#acknowledgements"><i class="fa fa-check"></i><b>1.4</b> Remerciements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="loadingPackages.html"><a href="loadingPackages.html"><i class="fa fa-check"></i><b>2</b> Chargement des logiciels R</a><ul>
<li class="chapter" data-level="2.1" data-path="loadingPackages.html"><a href="loadingPackages.html#internalProcessing"><i class="fa fa-check"></i><b>2.1</b> Traitement interne des données</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="accessingData.html"><a href="accessingData.html"><i class="fa fa-check"></i><b>3</b> Accès aux données de détection</a><ul>
<li class="chapter" data-level="3.1" data-path="accessingData.html"><a href="accessingData.html#databaseStructure"><i class="fa fa-check"></i><b>3.1</b> Structure des données</a></li>
<li class="chapter" data-level="3.2" data-path="accessingData.html"><a href="accessingData.html#databaseTypes"><i class="fa fa-check"></i><b>3.2</b> Types de bases de données</a></li>
<li class="chapter" data-level="3.3" data-path="accessingData.html"><a href="accessingData.html#loadPackages"><i class="fa fa-check"></i><b>3.3</b> Chargement des logiciels R pertinents</a></li>
<li class="chapter" data-level="3.4" data-path="accessingData.html"><a href="accessingData.html#reglage-de-lenvironnement-systeme"><i class="fa fa-check"></i><b>3.4</b> Réglage de l’environnement système</a></li>
<li class="chapter" data-level="3.5" data-path="accessingData.html"><a href="accessingData.html#importDetections"><i class="fa fa-check"></i><b>3.5</b> Importation de données de détection</a><ul>
<li class="chapter" data-level="3.5.1" data-path="accessingData.html"><a href="accessingData.html#downloadData"><i class="fa fa-check"></i><b>3.5.1</b> Téléchargement des données d’un projet pour la <em>première fois</em></a></li>
<li class="chapter" data-level="3.5.2" data-path="accessingData.html"><a href="accessingData.html#userAuthentication"><i class="fa fa-check"></i><b>3.5.2</b> Authentification de l’utilisateur</a></li>
<li class="chapter" data-level="3.5.3" data-path="accessingData.html"><a href="accessingData.html#telechargement-des-donnees-dun-recepteur-pour-la-premiere-fois"><i class="fa fa-check"></i><b>3.5.3</b> Téléchargement des données d’un récepteur pour la <em>première fois</em></a></li>
<li class="chapter" data-level="3.5.4" data-path="accessingData.html"><a href="accessingData.html#acceder-aux-donnees-de-detection-telechargees-accesssql."><i class="fa fa-check"></i><b>3.5.4</b> Accéder aux données de détection téléchargées {#accessSQL}.</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="accessingData.html"><a href="accessingData.html#exportDetections"><i class="fa fa-check"></i><b>3.6</b> Exportation d’une trame de données «plate» sous la forme d’un fichier CSV ou RDS</a></li>
<li class="chapter" data-level="3.7" data-path="accessingData.html"><a href="accessingData.html#mettre-a-jour-etou-ouvrir-une-base-de-donnees-existante-tagmeupdate."><i class="fa fa-check"></i><b>3.7</b> Mettre à jour et/ou ouvrir une base de données existante {#tagmeUpdate}.</a><ul>
<li class="chapter" data-level="3.7.1" data-path="accessingData.html"><a href="accessingData.html#tellme"><i class="fa fa-check"></i><b>3.7.1</b> Vérification de l’existence de nouvelles données</a></li>
<li class="chapter" data-level="3.7.2" data-path="accessingData.html"><a href="accessingData.html#forceMeta"><i class="fa fa-check"></i><b>3.7.2</b> Imposition d’une mise à jour/réimportation de métadonnées sur des émetteurs et des récepteurs</a></li>
<li class="chapter" data-level="3.7.3" data-path="accessingData.html"><a href="accessingData.html#metadata"><i class="fa fa-check"></i><b>3.7.3</b> Importation de l’ensemble des métadonnées sur les émetteurs et les récepteurs</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="accessingData.html"><a href="accessingData.html#verification-de-la-version-de-la-base-de-donnees-checkversion"><i class="fa fa-check"></i><b>3.8</b> Vérification de la version de la base de données {checkVersion}</a></li>
<li class="chapter" data-level="3.9" data-path="accessingData.html"><a href="accessingData.html#convention-de-noms-dobjets-r"><i class="fa fa-check"></i><b>3.9</b> Convention de noms d’objets R</a></li>
<li class="chapter" data-level="3.10" data-path="accessingData.html"><a href="accessingData.html#sommaire-telechargement-de-donnees-acces-aux-donnees-et-exportation-de-donnees"><i class="fa fa-check"></i><b>3.10</b> Sommaire: téléchargement de données, accès aux données et exportation de données</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="deployments.html"><a href="deployments.html"><i class="fa fa-check"></i><b>4</b> Déploiements d’émetteurs et de récepteurs</a><ul>
<li class="chapter" data-level="4.1" data-path="deployments.html"><a href="deployments.html#chargement-des-logiciels-r-pertinents-et-reglage-de-lenvironnement-de-travail"><i class="fa fa-check"></i><b>4.1</b> Chargement des logiciels R pertinents et réglage de l’environnement de travail</a></li>
<li class="chapter" data-level="4.2" data-path="deployments.html"><a href="deployments.html#chargement-du-fichier-.motus"><i class="fa fa-check"></i><b>4.2</b> Chargement du fichier .motus</a></li>
<li class="chapter" data-level="4.3" data-path="deployments.html"><a href="deployments.html#tagDeployments"><i class="fa fa-check"></i><b>4.3</b> Déploiements d’émetteurs</a><ul>
<li class="chapter" data-level="4.3.1" data-path="deployments.html"><a href="deployments.html#telechargement-des-metadonnees-completes-sur-les-emetteurs-pour-votre-projet"><i class="fa fa-check"></i><b>4.3.1</b> Téléchargement des métadonnées complètes sur les émetteurs pour votre projet</a></li>
<li class="chapter" data-level="4.3.2" data-path="deployments.html"><a href="deployments.html#determination-du-nombre-demetteurs-enregistres"><i class="fa fa-check"></i><b>4.3.2</b> Détermination du nombre d’émetteurs enregistrés</a></li>
<li class="chapter" data-level="4.3.3" data-path="deployments.html"><a href="deployments.html#determination-du-nombre-demetteurs-enregistres-qui-ont-ete-deployes"><i class="fa fa-check"></i><b>4.3.3</b> Détermination du nombre d’émetteurs enregistrés qui ont été déployés</a></li>
<li class="chapter" data-level="4.3.4" data-path="deployments.html"><a href="deployments.html#checkNumberTagDeployments"><i class="fa fa-check"></i><b>4.3.4</b> Détermination du nombre de déploiements par émetteur</a></li>
<li class="chapter" data-level="4.3.5" data-path="deployments.html"><a href="deployments.html#localisation-des-emetteurs-deployes"><i class="fa fa-check"></i><b>4.3.5</b> Localisation des émetteurs déployés</a></li>
<li class="chapter" data-level="4.3.6" data-path="deployments.html"><a href="deployments.html#verification-de-la-completude-et-de-lexactitude-des-metadonnees-sur-les-deploiements-demetteurs"><i class="fa fa-check"></i><b>4.3.6</b> Vérification de la complétude et de l’exactitude des métadonnées sur les déploiements d’émetteurs</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="deployments.html"><a href="deployments.html#recvMetadata"><i class="fa fa-check"></i><b>4.4</b> Vérification des métadonnées sur les récepteurs</a><ul>
<li class="chapter" data-level="4.4.1" data-path="deployments.html"><a href="deployments.html#telechargement-des-metadonnees-sur-tous-les-recepteurs-dans-le-reseau"><i class="fa fa-check"></i><b>4.4.1</b> Téléchargement des métadonnées sur tous les récepteurs dans le réseau</a></li>
<li class="chapter" data-level="4.4.2" data-path="deployments.html"><a href="deployments.html#determination-du-nombre-de-recepteurs-deployes-dans-le-cadre-de-votre-projet"><i class="fa fa-check"></i><b>4.4.2</b> Détermination du nombre de récepteurs déployés dans le cadre de votre projet</a></li>
<li class="chapter" data-level="4.4.3" data-path="deployments.html"><a href="deployments.html#determination-du-moment-du-deploiement-des-recepteurs-dans-le-cadre-de-votre-projet"><i class="fa fa-check"></i><b>4.4.3</b> Détermination du moment du déploiement des récepteurs dans le cadre de votre projet</a></li>
<li class="chapter" data-level="4.4.4" data-path="deployments.html"><a href="deployments.html#localisation-des-recepteurs-deployes"><i class="fa fa-check"></i><b>4.4.4</b> Localisation des récepteurs déployés</a></li>
<li class="chapter" data-level="4.4.5" data-path="deployments.html"><a href="deployments.html#verification-de-la-completude-et-de-lexactitude-des-metadonnees-sur-les-deploiements-des-recepteurs"><i class="fa fa-check"></i><b>4.4.5</b> Vérification de la complétude et de l’exactitude des métadonnées sur les déploiements des récepteurs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataCleaning.html"><a href="dataCleaning.html"><i class="fa fa-check"></i><b>5</b> Nettoyage des données</a><ul>
<li class="chapter" data-level="5.1" data-path="dataCleaning.html"><a href="dataCleaning.html#chargement-des-logiciels-requis"><i class="fa fa-check"></i><b>5.1</b> Chargement des logiciels requis</a></li>
<li class="chapter" data-level="5.2" data-path="dataCleaning.html"><a href="dataCleaning.html#chargement-des-donnees-de-detection"><i class="fa fa-check"></i><b>5.2</b> Chargement des données de détection</a></li>
<li class="chapter" data-level="5.3" data-path="dataCleaning.html"><a href="dataCleaning.html#verifications-preliminaires-des-donnees"><i class="fa fa-check"></i><b>5.3</b> Vérifications préliminaires des données</a><ul>
<li class="chapter" data-level="5.3.1" data-path="dataCleaning.html"><a href="dataCleaning.html#sommaires-de-donnees-de-detection-demetteurs"><i class="fa fa-check"></i><b>5.3.1</b> Sommaires de données de détection d’émetteurs</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="dataCleaning.html"><a href="dataCleaning.html#ambigs"><i class="fa fa-check"></i><b>5.4</b> Recherche et examen de détections ambiguës</a></li>
<li class="chapter" data-level="5.5" data-path="dataCleaning.html"><a href="dataCleaning.html#verification-de-la-validite-des-sequences-dau-moins-2-detections"><i class="fa fa-check"></i><b>5.5</b> Vérification de la validité des séquences d’au moins 2 détections</a></li>
<li class="chapter" data-level="5.6" data-path="dataCleaning.html"><a href="dataCleaning.html#filtrage-des-donnees"><i class="fa fa-check"></i><b>5.6</b> Filtrage des données</a><ul>
<li class="chapter" data-level="5.6.1" data-path="dataCleaning.html"><a href="dataCleaning.html#filtrer-et-enregistrer-le-resultat-dans-le-format-rds"><i class="fa fa-check"></i><b>5.6.1</b> Filtrer et enregistrer le résultat dans le format RDS</a></li>
<li class="chapter" data-level="5.6.2" data-path="dataCleaning.html"><a href="dataCleaning.html#enregistrer-un-filtre-personnalise-dans-la-base-de-donnees-motus-et-lappliquer-aux-donnees"><i class="fa fa-check"></i><b>5.6.2</b> Enregistrer un filtre personnalisé dans la base de données motus et l’appliquer aux données</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="exploreData.html"><a href="exploreData.html"><i class="fa fa-check"></i><b>6</b> Exploration des données avec le logiciel R de Motus</a><ul>
<li class="chapter" data-level="6.1" data-path="exploreData.html"><a href="exploreData.html#chargement-des-logiciels-requis-1"><i class="fa fa-check"></i><b>6.1</b> Chargement des logiciels requis</a></li>
<li class="chapter" data-level="6.2" data-path="exploreData.html"><a href="exploreData.html#chargement-des-donnees"><i class="fa fa-check"></i><b>6.2</b> Chargement des données</a></li>
<li class="chapter" data-level="6.3" data-path="exploreData.html"><a href="exploreData.html#dataSummaries"><i class="fa fa-check"></i><b>6.3</b> Sommaires de données</a></li>
<li class="chapter" data-level="6.4" data-path="exploreData.html"><a href="exploreData.html#dataPlotting"><i class="fa fa-check"></i><b>6.4</b> Graphiques de données</a></li>
<li class="chapter" data-level="6.5" data-path="exploreData.html"><a href="exploreData.html#mappingData"><i class="fa fa-check"></i><b>6.5</b> Cartes de données</a><ul>
<li class="chapter" data-level="6.5.1" data-path="exploreData.html"><a href="exploreData.html#googleMaps"><i class="fa fa-check"></i><b>6.5.1</b> Utilisation de Google Maps</a></li>
<li class="chapter" data-level="6.5.2" data-path="exploreData.html"><a href="exploreData.html#outlineMaps"><i class="fa fa-check"></i><b>6.5.2</b> Création de cartes muettes simples</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="vanishingBearings.html"><a href="vanishingBearings.html"><i class="fa fa-check"></i><b>7</b> Directions estimées aux points de départ</a><ul>
<li class="chapter" data-level="7.1" data-path="vanishingBearings.html"><a href="vanishingBearings.html#thingsToBeAwareOf"><i class="fa fa-check"></i><b>7.1</b> Aspects à considérer</a></li>
<li class="chapter" data-level="7.2" data-path="vanishingBearings.html"><a href="vanishingBearings.html#estimateBearings"><i class="fa fa-check"></i><b>7.2</b> Estimation des directions aux points de départ, étape par étape</a><ul>
<li class="chapter" data-level="7.2.1" data-path="vanishingBearings.html"><a href="vanishingBearings.html#loadPackages7"><i class="fa fa-check"></i><b>7.2.1</b> Charger les logiciels R requis.</a></li>
<li class="chapter" data-level="7.2.2" data-path="vanishingBearings.html"><a href="vanishingBearings.html#vanishingSample"><i class="fa fa-check"></i><b>7.2.2</b> Charger les données.</a></li>
<li class="chapter" data-level="7.2.3" data-path="vanishingBearings.html"><a href="vanishingBearings.html#choisir-les-individus-pour-lesquels-les-donnees-recueillies-a-la-station-indiquent-des-directions-de-depart-claires."><i class="fa fa-check"></i><b>7.2.3</b> Choisir les individus pour lesquels les données recueillies à la station indiquent des directions de départ claires.</a></li>
<li class="chapter" data-level="7.2.4" data-path="vanishingBearings.html"><a href="vanishingBearings.html#obtenir-lheure-du-depart-de-chaque-individu."><i class="fa fa-check"></i><b>7.2.4</b> Obtenir l’heure du départ de chaque individu.</a></li>
<li class="chapter" data-level="7.2.5" data-path="vanishingBearings.html"><a href="vanishingBearings.html#calculer-les-directions-aux-points-de-depart-des-individus-pour-lesquels-les-heures-de-depart-sont-connues."><i class="fa fa-check"></i><b>7.2.5</b> Calculer les directions aux points de départ des individus pour lesquels les heures de départ sont connues.</a></li>
<li class="chapter" data-level="7.2.6" data-path="vanishingBearings.html"><a href="vanishingBearings.html#pointer-les-valeurs-des-directions-estimees-aux-points-de-depart-sur-une-carte."><i class="fa fa-check"></i><b>7.2.6</b> Pointer les valeurs des directions estimées aux points de départ sur une carte.</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="vanishingBearings.html"><a href="vanishingBearings.html#vanishingLitCited"><i class="fa fa-check"></i><b>7.3</b> Bibliographie</a></li>
</ul></li>
<li class="appendix"><span><b>Annexe</b></span></li>
<li class="chapter" data-level="A" data-path="appendixA.html"><a href="appendixA.html"><i class="fa fa-check"></i><b>A</b> Annexe A - alltags structure</a></li>
<li class="chapter" data-level="B" data-path="appendixB.html"><a href="appendixB.html"><i class="fa fa-check"></i><b>B</b> Annexe B - Dépannage</a><ul>
<li class="chapter" data-level="B.1" data-path="appendixB.html"><a href="appendixB.html#motusLogout"><i class="fa fa-check"></i><b>B.1</b> Fermeture du logiciel motus</a></li>
<li class="chapter" data-level="B.2" data-path="appendixB.html"><a href="appendixB.html#resumeDownload"><i class="fa fa-check"></i><b>B.2</b> Reprise du téléchargement de données</a></li>
<li class="chapter" data-level="B.3" data-path="appendixB.html"><a href="appendixB.html#messages-derreur-courants-et-solutions"><i class="fa fa-check"></i><b>B.3</b> Messages d’erreur courants et solutions</a><ul>
<li class="chapter" data-level="B.3.1" data-path="appendixB.html"><a href="appendixB.html#je-recois-le-message-auto-disconnecting-sqliteconnection-une-ou-plusieurs-fois-apres-avoir-utilise-la-fonction-tagme."><i class="fa fa-check"></i><b>B.3.1</b> Je reçois le message «Auto-disconnecting SQLiteConnection» une ou plusieurs fois après avoir utilisé la fonction tagme().</a></li>
<li class="chapter" data-level="B.3.2" data-path="appendixB.html"><a href="appendixB.html#je-recois-le-message-internal-server-error-pendant-que-jutilise-la-fonction-tagme-update-true."><i class="fa fa-check"></i><b>B.3.2</b> Je reçois le message «Internal Server Error» pendant que j’utilise la fonction tagme (…, update = TRUE).</a></li>
<li class="chapter" data-level="B.3.3" data-path="appendixB.html"><a href="appendixB.html#je-recois-le-message-error-forbidden-pendant-que-jutilise-la-fonction-tagme."><i class="fa fa-check"></i><b>B.3.3</b> Je reçois le message «Error: Forbidden» pendant que j’utilise la fonction tagme().</a></li>
<li class="chapter" data-level="B.3.4" data-path="appendixB.html"><a href="appendixB.html#je-recois-le-message-error-object-xxxx-not-found-relatif-au-nom-dune-table-ou-dun-champ-ou-encore-certains-de-vos-exemples-dans-le-guide-ne-fonctionnent-pas."><i class="fa fa-check"></i><b>B.3.4</b> Je reçois le message «Error: Object ‘xxxx’ not found», relatif au nom d’une table ou d’un champ, ou encore certains de vos exemples dans le guide ne fonctionnent pas.</a></li>
<li class="chapter" data-level="B.3.5" data-path="appendixB.html"><a href="appendixB.html#je-recois-le-message-error-in-rsqlite_connectdbname-loadable.extensions-flags-vfs-could-not-connect-to-database-unable-to-open-database-file-lorsque-je-tente-dexecuter-la-fonction-tagme."><i class="fa fa-check"></i><b>B.3.5</b> Je reçois le message «Error in rsqlite_connect(dbname, loadable.extensions, flags, vfs): Could not connect to database: unable to open database file» lorsque je tente d’exécuter la fonction tagme().</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="appendixC.html"><a href="appendixC.html"><i class="fa fa-check"></i><b>C</b> Annexe C - Le logiciel R de Motus</a><ul>
<li class="chapter" data-level="C.1" data-path="appendixC.html"><a href="appendixC.html#checkVersion.B"><i class="fa fa-check"></i><b>C.1</b> checkVersion</a><ul>
<li class="chapter" data-level="C.1.1" data-path="appendixC.html"><a href="appendixC.html#description"><i class="fa fa-check"></i><b>C.1.1</b> Description</a></li>
<li class="chapter" data-level="C.1.2" data-path="appendixC.html"><a href="appendixC.html#dependances"><i class="fa fa-check"></i><b>C.1.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.1.3" data-path="appendixC.html"><a href="appendixC.html#exemple"><i class="fa fa-check"></i><b>C.1.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.2" data-path="appendixC.html"><a href="appendixC.html#sunRiseSet"><i class="fa fa-check"></i><b>C.2</b> sunRiseSet</a><ul>
<li class="chapter" data-level="C.2.1" data-path="appendixC.html"><a href="appendixC.html#description-1"><i class="fa fa-check"></i><b>C.2.1</b> Description</a></li>
<li class="chapter" data-level="C.2.2" data-path="appendixC.html"><a href="appendixC.html#dependances-1"><i class="fa fa-check"></i><b>C.2.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.2.3" data-path="appendixC.html"><a href="appendixC.html#exemple-1"><i class="fa fa-check"></i><b>C.2.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.3" data-path="appendixC.html"><a href="appendixC.html#plotAllTagsCoor"><i class="fa fa-check"></i><b>C.3</b> plotAllTagsCoord</a><ul>
<li class="chapter" data-level="C.3.1" data-path="appendixC.html"><a href="appendixC.html#description-2"><i class="fa fa-check"></i><b>C.3.1</b> Description</a></li>
<li class="chapter" data-level="C.3.2" data-path="appendixC.html"><a href="appendixC.html#dependances-2"><i class="fa fa-check"></i><b>C.3.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.3.3" data-path="appendixC.html"><a href="appendixC.html#exemple-2"><i class="fa fa-check"></i><b>C.3.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.4" data-path="appendixC.html"><a href="appendixC.html#plotAllTagsSite"><i class="fa fa-check"></i><b>C.4</b> plotAllTagsSite</a><ul>
<li class="chapter" data-level="C.4.1" data-path="appendixC.html"><a href="appendixC.html#description-3"><i class="fa fa-check"></i><b>C.4.1</b> Description</a></li>
<li class="chapter" data-level="C.4.2" data-path="appendixC.html"><a href="appendixC.html#dependances-3"><i class="fa fa-check"></i><b>C.4.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.4.3" data-path="appendixC.html"><a href="appendixC.html#exemple-3"><i class="fa fa-check"></i><b>C.4.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.5" data-path="appendixC.html"><a href="appendixC.html#plotDailySiteSum"><i class="fa fa-check"></i><b>C.5</b> plotDailySiteSum</a><ul>
<li class="chapter" data-level="C.5.1" data-path="appendixC.html"><a href="appendixC.html#description-4"><i class="fa fa-check"></i><b>C.5.1</b> Description</a></li>
<li class="chapter" data-level="C.5.2" data-path="appendixC.html"><a href="appendixC.html#dependances-4"><i class="fa fa-check"></i><b>C.5.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.5.3" data-path="appendixC.html"><a href="appendixC.html#exemple-4"><i class="fa fa-check"></i><b>C.5.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.6" data-path="appendixC.html"><a href="appendixC.html#plotRouteMap"><i class="fa fa-check"></i><b>C.6</b> plotRouteMap</a><ul>
<li class="chapter" data-level="C.6.1" data-path="appendixC.html"><a href="appendixC.html#description-5"><i class="fa fa-check"></i><b>C.6.1</b> Description</a></li>
<li class="chapter" data-level="C.6.2" data-path="appendixC.html"><a href="appendixC.html#exemple-5"><i class="fa fa-check"></i><b>C.6.2</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.7" data-path="appendixC.html"><a href="appendixC.html#plotSite"><i class="fa fa-check"></i><b>C.7</b> plotSite</a><ul>
<li class="chapter" data-level="C.7.1" data-path="appendixC.html"><a href="appendixC.html#description-6"><i class="fa fa-check"></i><b>C.7.1</b> Description</a></li>
<li class="chapter" data-level="C.7.2" data-path="appendixC.html"><a href="appendixC.html#dependances-5"><i class="fa fa-check"></i><b>C.7.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.7.3" data-path="appendixC.html"><a href="appendixC.html#exemple-6"><i class="fa fa-check"></i><b>C.7.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.8" data-path="appendixC.html"><a href="appendixC.html#plotSiteSig"><i class="fa fa-check"></i><b>C.8</b> plotSiteSig</a><ul>
<li class="chapter" data-level="C.8.1" data-path="appendixC.html"><a href="appendixC.html#description-7"><i class="fa fa-check"></i><b>C.8.1</b> Description</a></li>
<li class="chapter" data-level="C.8.2" data-path="appendixC.html"><a href="appendixC.html#dependances-6"><i class="fa fa-check"></i><b>C.8.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.8.3" data-path="appendixC.html"><a href="appendixC.html#exemple-7"><i class="fa fa-check"></i><b>C.8.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.9" data-path="appendixC.html"><a href="appendixC.html#plotTagSig"><i class="fa fa-check"></i><b>C.9</b> plotTagSig</a><ul>
<li class="chapter" data-level="C.9.1" data-path="appendixC.html"><a href="appendixC.html#description-8"><i class="fa fa-check"></i><b>C.9.1</b> Description</a></li>
<li class="chapter" data-level="C.9.2" data-path="appendixC.html"><a href="appendixC.html#dependances-7"><i class="fa fa-check"></i><b>C.9.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.9.3" data-path="appendixC.html"><a href="appendixC.html#exemple-8"><i class="fa fa-check"></i><b>C.9.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.10" data-path="appendixC.html"><a href="appendixC.html#simSiteDet"><i class="fa fa-check"></i><b>C.10</b> simSiteDet</a><ul>
<li class="chapter" data-level="C.10.1" data-path="appendixC.html"><a href="appendixC.html#description-9"><i class="fa fa-check"></i><b>C.10.1</b> Description</a></li>
<li class="chapter" data-level="C.10.2" data-path="appendixC.html"><a href="appendixC.html#dependances-8"><i class="fa fa-check"></i><b>C.10.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.10.3" data-path="appendixC.html"><a href="appendixC.html#exemple-9"><i class="fa fa-check"></i><b>C.10.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.11" data-path="appendixC.html"><a href="appendixC.html#siteSum"><i class="fa fa-check"></i><b>C.11</b> siteSum</a><ul>
<li class="chapter" data-level="C.11.1" data-path="appendixC.html"><a href="appendixC.html#description-10"><i class="fa fa-check"></i><b>C.11.1</b> Description</a></li>
<li class="chapter" data-level="C.11.2" data-path="appendixC.html"><a href="appendixC.html#dependances-9"><i class="fa fa-check"></i><b>C.11.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.11.3" data-path="appendixC.html"><a href="appendixC.html#exemple-10"><i class="fa fa-check"></i><b>C.11.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.12" data-path="appendixC.html"><a href="appendixC.html#siteSumDaily"><i class="fa fa-check"></i><b>C.12</b> siteSumDaily</a><ul>
<li class="chapter" data-level="C.12.1" data-path="appendixC.html"><a href="appendixC.html#description-11"><i class="fa fa-check"></i><b>C.12.1</b> Description</a></li>
<li class="chapter" data-level="C.12.2" data-path="appendixC.html"><a href="appendixC.html#dependances-10"><i class="fa fa-check"></i><b>C.12.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.12.3" data-path="appendixC.html"><a href="appendixC.html#exemple-11"><i class="fa fa-check"></i><b>C.12.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.13" data-path="appendixC.html"><a href="appendixC.html#siteTrans"><i class="fa fa-check"></i><b>C.13</b> siteTrans</a><ul>
<li class="chapter" data-level="C.13.1" data-path="appendixC.html"><a href="appendixC.html#description-12"><i class="fa fa-check"></i><b>C.13.1</b> Description</a></li>
<li class="chapter" data-level="C.13.2" data-path="appendixC.html"><a href="appendixC.html#dependances-11"><i class="fa fa-check"></i><b>C.13.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.13.3" data-path="appendixC.html"><a href="appendixC.html#exemple-12"><i class="fa fa-check"></i><b>C.13.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.14" data-path="appendixC.html"><a href="appendixC.html#tagSum"><i class="fa fa-check"></i><b>C.14</b> tagSum</a><ul>
<li class="chapter" data-level="C.14.1" data-path="appendixC.html"><a href="appendixC.html#description-13"><i class="fa fa-check"></i><b>C.14.1</b> Description</a></li>
<li class="chapter" data-level="C.14.2" data-path="appendixC.html"><a href="appendixC.html#dependances-12"><i class="fa fa-check"></i><b>C.14.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.14.3" data-path="appendixC.html"><a href="appendixC.html#exemple-13"><i class="fa fa-check"></i><b>C.14.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.15" data-path="appendixC.html"><a href="appendixC.html#tagSumSite"><i class="fa fa-check"></i><b>C.15</b> tagSumSite</a><ul>
<li class="chapter" data-level="C.15.1" data-path="appendixC.html"><a href="appendixC.html#description-14"><i class="fa fa-check"></i><b>C.15.1</b> Description</a></li>
<li class="chapter" data-level="C.15.2" data-path="appendixC.html"><a href="appendixC.html#dependances-13"><i class="fa fa-check"></i><b>C.15.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.15.3" data-path="appendixC.html"><a href="appendixC.html#exemple-14"><i class="fa fa-check"></i><b>C.15.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="C.16" data-path="appendixC.html"><a href="appendixC.html#timeToSunriset"><i class="fa fa-check"></i><b>C.16</b> timeToSunriset</a><ul>
<li class="chapter" data-level="C.16.1" data-path="appendixC.html"><a href="appendixC.html#description-15"><i class="fa fa-check"></i><b>C.16.1</b> Description</a></li>
<li class="chapter" data-level="C.16.2" data-path="appendixC.html"><a href="appendixC.html#dependances-14"><i class="fa fa-check"></i><b>C.16.2</b> Dépendances</a></li>
<li class="chapter" data-level="C.16.3" data-path="appendixC.html"><a href="appendixC.html#exemple-15"><i class="fa fa-check"></i><b>C.16.3</b> Exemple</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="D" data-path="appendixD.html"><a href="appendixD.html"><i class="fa fa-check"></i><b>D</b> Annexe D - Le logiciel motusClient - Fonctions de filtrage de données</a><ul>
<li class="chapter" data-level="D.1" data-path="appendixD.html"><a href="appendixD.html#listRunsFilters"><i class="fa fa-check"></i><b>D.1</b> listRunsFilters</a><ul>
<li class="chapter" data-level="D.1.1" data-path="appendixD.html"><a href="appendixD.html#description-16"><i class="fa fa-check"></i><b>D.1.1</b> Description</a></li>
</ul></li>
<li class="chapter" data-level="D.2" data-path="appendixD.html"><a href="appendixD.html#dependances-15"><i class="fa fa-check"></i><b>D.2</b> Dépendances</a></li>
<li class="chapter" data-level="D.3" data-path="appendixD.html"><a href="appendixD.html#exemple-16"><i class="fa fa-check"></i><b>D.3</b> Exemple</a></li>
<li class="chapter" data-level="D.4" data-path="appendixD.html"><a href="appendixD.html#createRunsFilter"><i class="fa fa-check"></i><b>D.4</b> createRunsFilter</a><ul>
<li class="chapter" data-level="D.4.1" data-path="appendixD.html"><a href="appendixD.html#description-17"><i class="fa fa-check"></i><b>D.4.1</b> Description</a></li>
<li class="chapter" data-level="D.4.2" data-path="appendixD.html"><a href="appendixD.html#dependances-16"><i class="fa fa-check"></i><b>D.4.2</b> Dépendances</a></li>
<li class="chapter" data-level="D.4.3" data-path="appendixD.html"><a href="appendixD.html#exemple-17"><i class="fa fa-check"></i><b>D.4.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="D.5" data-path="appendixD.html"><a href="appendixD.html#getRunsFilters"><i class="fa fa-check"></i><b>D.5</b> getRunsFilters</a><ul>
<li class="chapter" data-level="D.5.1" data-path="appendixD.html"><a href="appendixD.html#description-18"><i class="fa fa-check"></i><b>D.5.1</b> Description</a></li>
<li class="chapter" data-level="D.5.2" data-path="appendixD.html"><a href="appendixD.html#dependances-17"><i class="fa fa-check"></i><b>D.5.2</b> Dépendances</a></li>
<li class="chapter" data-level="D.5.3" data-path="appendixD.html"><a href="appendixD.html#exemple-18"><i class="fa fa-check"></i><b>D.5.3</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="D.6" data-path="appendixD.html"><a href="appendixD.html#writeRunsFilter"><i class="fa fa-check"></i><b>D.6</b> writeRunsFilter</a><ul>
<li class="chapter" data-level="D.6.1" data-path="appendixD.html"><a href="appendixD.html#description-19"><i class="fa fa-check"></i><b>D.6.1</b> Description</a></li>
<li class="chapter" data-level="D.6.2" data-path="appendixD.html"><a href="appendixD.html#dependances-18"><i class="fa fa-check"></i><b>D.6.2</b> Dépendances</a></li>
<li class="chapter" data-level="D.6.3" data-path="appendixD.html"><a href="appendixD.html#exemples"><i class="fa fa-check"></i><b>D.6.3</b> Exemples</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Guide R pour Motus</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="deployments" class="section level1">
<h1><span class="header-section-number">4</span> Déploiements d’émetteurs et de récepteurs</h1>
<p>Avant de travailler avec vos données de détection, il convient d’abord de résumer et de visualiser les métadonnées relatives aux déploiements des émetteurs et des récepteurs enregistrés dans le cadre de votre projet. La production de sommaires, de graphiques et de cartes des données sur vos déploiements peut permettre de trouver des erreurs possibles dans les métadonnées sur les émetteurs et les récepteurs. De telles erreurs peuvent faire en sorte que les données de détection recueillies dans le cadre de votre projet soient incomplètes, tout comme les projets d’autres chercheurs dont des émetteurs ont été détectés par vos récepteurs.</p>
<p>Le présent chapitre est un complément de la <a href="https://motus.org/data/login">page sur les problèmes de données</a> du site Web de Motus, qui présente pour chaque projet une liste des problèmes touchant les métadonnées (valeurs manquantes ou aberrantes), problèmes qu’il faut accepter ou ne pas prendre en compte. Veuillez traiter toutes les erreurs associées à votre projet qui sont indiquées dans la page des problèmes de données <strong>avant</strong> d’importer vos données par l’intermédiaire de R. Les indications fournies ici ne permettent pas de faire une vérification complète des métadonnées sur les déploiements de vos émetteurs et récepteurs, mais elles aideront à déceler les erreurs que les interrogations automatiques sur la page des problèmes de données n’ont pas permis de trouver.</p>
<p>Nous utilisons l’ensemble de données du Programme de suivi des oiseaux de rivage de la baie James (projet 176) à titre d’exemple tout au long du présent chapitre (voyez la section <a href="introduction.html#sampleData">1.3</a>). Pendant que vous parcourez le code pour examiner vos propres déploiements, **si vous trouvez des erreurs ou des omissions dans vos métadonnées, veuillez les corriger; pour ce faire, rendez-vous à la page <a href="https://motus.org/.**" class="uri">https://motus.org/.**</a> Cliquez sur l’option «Gérer les données» et dans le menu, choisissez «Gérer vos émetteurs» pour corriger les métadonnées sur les déploiements d’émetteurs ou «Gérer vos récepteurs» pour corriger les métadonnées sur les récepteurs. Il est important de corriger en ligne les erreurs dans les métadonnées; ainsi, les erreurs sont corrigées à la source et les données corrigées sont archivées dans le serveur de Motus, de sorte que tous les utilisateurs ont accès aux métadonnées correctes sur les émetteurs et les récepteurs. Les métadonnées corrigées en ligne seront automatiquement corrigées dans vos fichiers de données de détection. Si vous avez déjà téléchargé vos données de détection, vous pouvez mettre à jour le fichier existant afin d’inclure les nouvelles métadonnées et données de détection (voyez les sections <a href="accessingData.html#forceMeta">3.7.2</a> et <a href="#tagmeUpdate"><strong>??</strong></a>).</p>
<div id="chargement-des-logiciels-r-pertinents-et-reglage-de-lenvironnement-de-travail" class="section level2">
<h2><span class="header-section-number">4.1</span> Chargement des logiciels R pertinents et réglage de l’environnement de travail</h2>
<p>Avant de commencer à travailler avec des données, il faut charger les logiciels requis pour les opérations expliquées dans le présent chapitre. Si vous n’avez pas encore installé ces logiciels (à partir de github et de CRAN), retournez au chapitre <a href="loadingPackages.html#loadingPackages">2</a> pour le faire.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(tidyr)
<span class="kw">library</span>(motus)

<span class="co"># Réglez le fuseau horaire de l&#39;environnement</span>
<span class="co"># système au temps universel coordonné (UTC), pour</span>
<span class="co"># vous assurer de toujours travailler à cette</span>
<span class="co"># échelle de temps.</span>
<span class="kw">Sys.setenv</span>(<span class="dt">TZ =</span> <span class="st">&quot;GMT&quot;</span>)</code></pre></div>
</div>
<div id="chargement-du-fichier-.motus" class="section level2">
<h2><span class="header-section-number">4.2</span> Chargement du fichier .motus</h2>
<p>Dans le présent chapitre, il est tenu pour acquis que vous avez déjà téléchargé le fichier .motus. Si ce n’est pas le cas, retournez au chapitre <a href="accessingData.html#accessingData">3</a>, qui présente la marche à suivre pour ce faire. Pour mettre à jour le fichier existant et le charger dans R, utilisez la fonction tagme(); pour ce faire, il se peut que vous ayez à ouvrir une session tel qu’indiqué dans le chapitre précédent en entrant votre nom d’utilisateur <strong>et</strong> le mot de passe «motus.sample».</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">proj.num &lt;-<span class="st"> </span><span class="dv">176</span>

sql.motus &lt;-<span class="st"> </span><span class="kw">tagme</span>(proj.num, <span class="dt">update =</span> <span class="ot">TRUE</span>, <span class="dt">dir =</span> <span class="st">&quot;./data&quot;</span>)</code></pre></div>
</div>
<div id="tagDeployments" class="section level2">
<h2><span class="header-section-number">4.3</span> Déploiements d’émetteurs</h2>
<p>Dans votre fichier .motus, lorsque vous utilisez la fonction tagme(), vous obtenez seulement les métadonnées sur tous les émetteurs dont les signaux ont été détectés dans le cadre de votre projet ainsi que les métadonnées sur les émetteurs ambigus associés dont les signaux ont été détectés dans le cadre d’autres projets et les métadonnées sur les récepteurs des stations où des signaux de vos émetteurs ont été détectés. Ici, nous:</p>
<ol style="list-style-type: decimal">
<li>téléchargerons les métadonnées complètes sur les émetteurs pour votre projet seulement;<br />
</li>
<li>déterminerons combien d’émetteurs sont enregistrés dans le cadre de votre projet;<br />
</li>
<li>déterminerons combien de ces émetteurs enregistrés ont été déployés;<br />
</li>
<li>localiserons les émetteurs déployés;<br />
</li>
<li>vérifierons si les métadonnées sur les déploiements d’émetteurs sont complètes et exactes.</li>
</ol>
<p>Voyons maintenant chacune de ces opérations dans l’ordre.</p>
<div id="telechargement-des-metadonnees-completes-sur-les-emetteurs-pour-votre-projet" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Téléchargement des métadonnées complètes sur les émetteurs pour votre projet</h3>
<p>Si les métadonnées sont incomplètes ou s’il manque des enregistrements d’émetteurs, il se peut qu’il manque des données de détection. Il faut donc vérifier si tous les émetteurs enregistrés pour votre projet sont pris en compte et pas seulement ceux dont des signaux ont été détectés. Pour ce faire, nous utiliserons la fonction metadata() pour le projet 176, dont il est question plus en détail dans la section <a href="accessingData.html#metadata">3.7.3</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">metadata</span>(sql.motus, <span class="dt">projectIDs =</span> proj.num)</code></pre></div>
</div>
<div id="determination-du-nombre-demetteurs-enregistres" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Détermination du nombre d’émetteurs enregistrés</h3>
<p>Maintenant que nous avons l’ensemble des métadonnées sur les émetteurs pour notre projet, nous pouvons vérifier le nombre d’émetteurs enregistrés en chargeant la table «tags» dans le fichier .motus. Cette table contient les métadonnées sur chaque émetteur enregistré, dont son identifiant unique et de l’information sur le fabricant, le modèle, les fréquences nominale et décalée, la cadence d’émission et la durée de l’impulsion. La table «tags» ne fournit pas d’information sur le déploiement des émetteurs. Nous choisissons les métadonnées propres au Programme de suivi des oiseaux de rivage de la baie James (projet 176) et ne tenons pas compte des métadonnées associées à de possibles émetteurs en double utilisés pour d’autres projets:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tbl.tags &lt;-<span class="st"> </span><span class="kw">tbl</span>(sql.motus, <span class="st">&quot;tags&quot;</span>)
df.tags &lt;-<span class="st"> </span>tbl.tags <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(projectID <span class="op">==</span><span class="st"> </span>proj.num) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">collect</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.data.frame</span>()</code></pre></div>
<p>Le nombre de lignes dans la base de données «df.tags» équivaut au nombre d’émetteurs dans l’ensemble de données du Programme de suivi des oiseaux de rivage de la baie James qui sont enregistrés (projet 176; 18 émetteurs):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(df.tags)  <span class="co"># Nombre d&#39;émetteurs enregistrés dans la base de données</span></code></pre></div>
<pre><code>## [1] 18</code></pre>
<p>Vous pouvez voir les identifiants des émetteurs (motusTagID):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unique</span>(df.tags<span class="op">$</span>tagID)</code></pre></div>
<pre><code>##  [1] 16011 16035 16036 16037 16038 16039 16044 16047 16048 16052 17357
## [12] 19129 22867 22897 22902 22905 23316 23319</code></pre>
<p>Si des émetteurs enregistrés sont manquants, suivez les instructions fournies à <a href="https://motus.org/tag-registration/?lang=fr" class="uri">https://motus.org/tag-registration/?lang=fr</a>.</p>
</div>
<div id="determination-du-nombre-demetteurs-enregistres-qui-ont-ete-deployes" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Détermination du nombre d’émetteurs enregistrés qui ont été déployés</h3>
<p>Pour vérifier quels émetteurs enregistrés ont été déployés, il faut utiliser la table de métadonnées «tagDeps» qui se trouve dans le fichier .motus. Cette table indique la date, l’heure et le lieu du déploiement ainsi que le nom d’espèce de l’animal portant l’émetteur. La base de données se rapporte au projet 176, et nous utilisons la fonction anti_join afin de déterminer pour quels émetteurs enregistrés il existe (ou n’existe pas) d’information sur le déploiement.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tbl.tagDeps &lt;-<span class="st"> </span><span class="kw">tbl</span>(sql.motus, <span class="st">&quot;tagDeps&quot;</span>) 
df.tagDeps &lt;-<span class="st"> </span>tbl.tagDeps <span class="op">%&gt;%</span>
<span class="st">                </span><span class="kw">filter</span>(projectID <span class="op">==</span><span class="st"> </span>proj.num) <span class="op">%&gt;%</span>
<span class="st">                </span><span class="kw">collect</span>() <span class="op">%&gt;%</span>
<span class="st">                </span><span class="kw">as.data.frame</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># dans le format df, les dates peuvent être formatées avec le logiciel lubridate</span>
<span class="st">                </span><span class="kw">mutate</span>(<span class="dt">tsStart =</span> <span class="kw">as_datetime</span>(tsStart, <span class="dt">tz =</span> <span class="st">&quot;UTC&quot;</span>, <span class="dt">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>),
                       <span class="dt">tsEnd =</span> <span class="kw">as_datetime</span>(tsEnd, <span class="dt">tz =</span> <span class="st">&quot;UTC&quot;</span>, <span class="dt">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>)) 

<span class="kw">anti_join</span>(df.tags, df.tagDeps, <span class="dt">by =</span> <span class="st">&quot;tagID&quot;</span>) </code></pre></div>
<pre><code>##  [1] tagID        projectID    mfgID        type         codeSet     
##  [6] manufacturer model        lifeSpan     nomFreq      offsetFreq  
## [11] bi           pulseLen    
## &lt;0 rows&gt; (or 0-length row.names)</code></pre>
<p>Dans les données du programme de la baie James, il n’y a pas de métadonnées sur les déploiements manquantes pour les émetteurs enregistrés, ce qui porte à croire que tous les émetteurs ont été déployés. Si vous avez des émetteurs non déployés dans vos propres fichiers, vérifiez si c’est bien le cas dans vos dossiers; sans les métadonnées sur les déploiements, les données de détection reliées aux émetteurs enregistrés mais non déployés seront manquantes dans votre base de données de détection.</p>
</div>
<div id="checkNumberTagDeployments" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Détermination du nombre de déploiements par émetteur</h3>
<p>Un émetteur peut être déployé plus d’une fois. Par exemple, un émetteur déjà déployé peut avoir été récupéré puis déployé de nouveau sur un autre animal. Quand un émetteur est déployé plus d’une fois, les données de détection doivent être considérées indépendamment pour chaque déploiement.</p>
<p>Tout au long du présent guide, nous utilisons «motusTagID» comme identifiant unique pour un déploiement. Toutefois, lorsqu’un émetteur est déployé plus d’une fois, l’identifiant «motusTagID» demeure inchangé d’un déploiement à l’autre. Il faut utiliser «tagDeployID» ou une combinaison de «motusTagID» et de «tagDeployID» pour distinguer les détections propres à chaque déploiement.</p>
<p>Vérifions s’il y a plus d’un déploiement pour des émetteurs dans les données du programme de la baie James (en réalité, il n’y a pas de cas de plus d’un déploiement) puis voyons comment créer une variable combinée tagID/deployID pour l’utiliser à la place de l’identifiant «motusTagID» dans l’éventualité où il y aurait plus d’un déploiement d’un émetteur dans vos propres données:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df.alltags <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(motusTagID, tagDeployID) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>(<span class="kw">is.na</span>(tagDeployID))) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Enlever NA tagDeployID.</span>
<span class="st">  </span><span class="kw">distinct</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(motusTagID) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>## # A tibble: 0 x 3
## # Groups:   motusTagID [0]
## # ... with 3 variables: motusTagID &lt;int&gt;, tagDeployID &lt;int&gt;, n &lt;int&gt;</code></pre>
<p>Si vous avez plus d’un déploiement pour un émetteur, nous vous recommandons de créer une variable combinée «motusTagDepID», que vous utiliserez à la place de «motusTagID» pour définir un déploiement unique d’un émetteur. Tout au long du présent guide, vous remplacerez donc «motusTagID» par «motusTagDepID»:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df.alltags &lt;-<span class="st"> </span>df.alltags <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">motusTagDepID =</span> <span class="kw">paste</span>(motusTagID, 
    tagDeployID, <span class="dt">sep =</span> <span class="st">&quot;.&quot;</span>))

<span class="co"># et faire de même pour les métadonnées sur les</span>
<span class="co"># émetteurs</span>

df.tagDeps &lt;-<span class="st"> </span>df.tagDeps <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">motusTagDepID =</span> <span class="kw">paste</span>(tagID, 
    deployID, <span class="dt">sep =</span> <span class="st">&quot;.&quot;</span>))</code></pre></div>
</div>
<div id="localisation-des-emetteurs-deployes" class="section level3">
<h3><span class="header-section-number">4.3.5</span> Localisation des émetteurs déployés</h3>
<p>La production d’une carte indiquant les lieux où vos émetteurs ont été déployés peut permettre de détecter d’éventuelles erreurs évidentes dans les indications des degrés de latitude ou de longitude que les interrogations effectuées en ligne au centre de messages sur les métadonnées n’auraient pas permis de saisir.</p>
<p><strong>a. Chargement des fichiers de cartes de base</strong></p>
<p>Chargez les fichiers de cartes de base à partir du logiciel rworldmap:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">na.lakes &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="dt">map =</span> <span class="st">&quot;lakes&quot;</span>)
na.lakes &lt;-<span class="st"> </span><span class="kw">mutate</span>(na.lakes, <span class="dt">long =</span> long <span class="op">-</span><span class="st"> </span><span class="dv">360</span>)

<span class="co"># Incluez l&#39;ensemble des Amériques pour commencer.</span>
na.map &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="dt">map =</span> <span class="st">&quot;world2&quot;</span>)
na.map &lt;-<span class="st"> </span><span class="kw">filter</span>(na.map, region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;USA&quot;</span>))

na.map &lt;-<span class="st"> </span><span class="kw">mutate</span>(na.map, <span class="dt">long =</span> long <span class="op">-</span><span class="st"> </span><span class="dv">360</span>)

<span class="co"># Selon la position, vous voudrez peut-être</span>
<span class="co"># localiser des émetteurs dans d&#39;autres pays des</span>
<span class="co"># Amériques: «Mexico», «lakes»,«Belize», «Costa</span>
<span class="co"># Rica», «Panama», «Guatemala», «Honduras»,</span>
<span class="co"># «Nicaragua», «El Salvador», «Colombia»,</span>
<span class="co"># «Venezuela», «Ecuador», «Peru», «Brazil»,</span>
<span class="co"># «Guyana»,«Suriname», «Bolivia», «French Guiana»,</span>
<span class="co"># «Jamaica», «Cuba», «Haiti», «Dominican Republic»,</span>
<span class="co"># «The Bahamas», «Turks and Caicos Islands»,</span>
<span class="co"># «Puerto Rico», «British Virgin Islands»,</span>
<span class="co"># «Montserrat», «Dominica», «Saint Lucia»,</span>
<span class="co"># «Barbados», «Grenada», «Trinidad and Tobago»,</span>
<span class="co"># «Chile», «Argentina», «Uruguay»</span></code></pre></div>
<p><strong>b. Pointage des positions des émetteurs déployés</strong></p>
<p>Pointez les positions des émetteurs déployés à partir des données du programme de la baie James (projet 176):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fixez des limites à la carte en fonction des</span>
<span class="co"># positions des détections, en vous assurant que la</span>
<span class="co"># carte englobe ces positions.</span>
xmin &lt;-<span class="st"> </span><span class="op">-</span><span class="dv">100</span>  <span class="co">#min(df.tagDeps$longitude, na.rm = TRUE) - 5</span>
xmax &lt;-<span class="st"> </span><span class="kw">max</span>(df.tagDeps<span class="op">$</span>longitude, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span><span class="dv">5</span>
ymin &lt;-<span class="st"> </span><span class="kw">min</span>(df.tagDeps<span class="op">$</span>latitude, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">-</span><span class="st"> </span><span class="dv">5</span>
ymax &lt;-<span class="st"> </span><span class="kw">max</span>(df.tagDeps<span class="op">$</span>latitude, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span><span class="dv">5</span>

<span class="co"># Pointez en utilisant ggplot.</span>
<span class="kw">ggplot</span>(na.lakes, <span class="kw">aes</span>(long, lat)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> na.map, 
    <span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group), <span class="dt">colour =</span> <span class="st">&quot;grey&quot;</span>, 
    <span class="dt">fill =</span> <span class="st">&quot;grey98&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="kw">aes</span>(<span class="dt">group =</span> group), 
    <span class="dt">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">&quot;mercator&quot;</span>, 
    <span class="dt">xlim =</span> <span class="kw">c</span>(xmin, xmax), <span class="dt">ylim =</span> <span class="kw">c</span>(ymin, ymax)) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">data =</span> <span class="kw">filter</span>(df.tagDeps, 
    projectID <span class="op">==</span><span class="st"> </span><span class="dv">176</span>), <span class="kw">aes</span>(longitude, latitude), <span class="dt">cex =</span> <span class="dv">2</span>, 
    <span class="dt">pch =</span> <span class="dv">1</span>, <span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>)</code></pre></div>
<p><img src="images/mapRecvs1.png" width="1650" style="display: block; margin: auto;" /></p>
<p>S’il y a une erreur dans la position d’un émetteur déployé, veuillez la corriger en ligne à <a href="https://motus.org/data/" class="uri">https://motus.org/data/</a>.</p>
</div>
<div id="verification-de-la-completude-et-de-lexactitude-des-metadonnees-sur-les-deploiements-demetteurs" class="section level3">
<h3><span class="header-section-number">4.3.6</span> Vérification de la complétude et de l’exactitude des métadonnées sur les déploiements d’émetteurs</h3>
<p>Les métadonnées sur les émetteurs requises sont les suivantes : date/heure du début du déploiement, date/heure de la fin du déploiement (s’il y a lieu), latitude, longitude et espèce. L’absence d’information - en particulier les dates et les heures et les latitude et longitude - peut influer sur la durée de vie estimée de l’émetteur en cause; par conséquent, il faudra se demander si tagFinder «cherchera» l’émetteur au(x) moment(s) approprié(s). Cela peut aussi accroître le risque d’ambiguïtés causées par l’existence d’émetteurs en double dans le réseau.</p>
<p><strong>a. Vérifier les gammes de valeurs des métadonnées</strong></p>
<p>Tout d’abord, il faut utiliser le sommaire (df.tagDeps) pour avoir une idée de la gamme des valeurs de chaque variable et pour vérifier s’il manque des valeurs (NA) ou s’il y a des valeurs aberrantes pour une ou des variables. Nous présentons ci-dessous le résumé d’un sous-ensemble des variables dans la base de données df.tagDeps. Il faut répondre à plusieurs questions: est-ce que la plage des valeurs des dates du début et de la fin du déploiement est raisonnable pour vos déploiements? y a-t-il des erreurs évidentes dans les dates et les heures des déploiements? est-ce que la gamme des latitudes et longitudes est raisonnable? est-ce que les valeurs identifiant les espèces sont correctes?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df.tagDeps <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(tagID, projectID, tsStart, tsEnd, 
    speciesID, latitude, longitude) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</code></pre></div>
<pre><code>##      tagID         projectID      tsStart                   
##  Min.   :16011   Min.   :176   Min.   :2015-08-02 11:40:00  
##  1st Qu.:16038   1st Qu.:176   1st Qu.:2015-08-13 15:25:00  
##  Median :16050   Median :176   Median :2015-09-10 17:50:30  
##  Mean   :18616   Mean   :176   Mean   :2016-01-24 12:49:36  
##  3rd Qu.:22890   3rd Qu.:176   3rd Qu.:2016-09-25 15:34:15  
##  Max.   :23319   Max.   :176   Max.   :2016-10-15 16:00:00  
##      tsEnd                       speciesID       latitude    
##  Min.   :2015-12-17 11:40:00   Min.   :4180   Min.   :50.19  
##  1st Qu.:2015-12-28 15:25:00   1st Qu.:4670   1st Qu.:50.52  
##  Median :2016-03-10 17:50:30   Median :4690   Median :51.48  
##  Mean   :2016-07-28 18:09:36   Mean   :4674   Mean   :51.18  
##  3rd Qu.:2017-06-06 09:53:45   3rd Qu.:4690   3rd Qu.:51.48  
##  Max.   :2017-06-26 16:00:00   Max.   :4820   Max.   :51.80  
##    longitude     
##  Min.   :-80.69  
##  1st Qu.:-80.45  
##  Median :-80.45  
##  Mean   :-75.85  
##  3rd Qu.:-67.92  
##  Max.   :-63.75</code></pre>
<p>Il ne manque pas de dates de début (tsStart), et les dates de début des déploiements vont de 2015 à 2016, ce qui est raisonnable pour ce projet.</p>
<p>Les identifiants d’espèces sont numériques et n’ont pas de signification particulière si l’on ne peut pas leur attribuer chacun un nom d’espèce, ce que nous ferons ci-après. Dans le cas présent, il n’y a pas de valeurs manquantes.</p>
<p><strong>b. Vérifier que les identifiants d’espèces concordent avec vos données</strong></p>
<p>La table ‘species’ dans le fichier .motus associe chaque identifiant numérique d’espèce à un nom commun anglais, un nom commun français et un nom scientifique. Nous chargeons cette table et l’intégrons comme sous-ensemble de la suite d’identifiants numériques dans les métadonnées sur les émetteurs:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Générez la liste des identifiants d&#39;espèces dans</span>
<span class="co"># les métadonnées du projet 176.</span>
sp.list &lt;-<span class="st"> </span><span class="kw">unique</span>(df.tagDeps<span class="op">$</span>speciesID)

<span class="co"># Métadonnées sur les espèces</span>
tbl.species &lt;-<span class="st"> </span><span class="kw">tbl</span>(sql.motus, <span class="st">&quot;species&quot;</span>)
tbl.species <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(id <span class="op">%in%</span><span class="st"> </span>sp.list) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collect</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">as.data.frame</span>()</code></pre></div>
<pre><code>##     id                english                       french
## 1 4180    Semipalmated Plover            Pluvier semipalmé
## 2 4670               Red Knot           Bécasseau maubèche
## 3 4680             Sanderling         Bécasseau sanderling
## 4 4690 Semipalmated Sandpiper          Bécasseau semipalmé
## 5 4760 White-rumped Sandpiper   Bécasseau à croupion blanc
## 6 4780     Pectoral Sandpiper Bécasseau à poitrine cendrée
## 7 4820                 Dunlin           Bécasseau variable
##                scientific group sort
## 1 Charadrius semipalmatus BIRDS   NA
## 2        Calidris canutus BIRDS   NA
## 3           Calidris alba BIRDS   NA
## 4        Calidris pusilla BIRDS   NA
## 5    Calidris fuscicollis BIRDS   NA
## 6      Calidris melanotos BIRDS   NA
## 7         Calidris alpina BIRDS   NA</code></pre>
<p>Cette opération génère la liste de toutes les espèces incluses dans les métadonnées sur les déploiements d’émetteurs pour le projet. Si des noms d’espèces sont inappropriés, cela s’explique probablement par une erreur de saisie de données au moment de l’attribution d’un déploiement à une espèce. Vous pouvez chercher les enregistrements dans vos métadonnées sur les émetteurs en utilisant le code suivant; ensuite, vous utilisez la variable deployID associée à l’entrée ou aux entrées pour trouver et mettre à jour en ligne l’enregistrement du déploiement dans vos métadonnées sur le projet:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(df.tagDeps, speciesID <span class="op">==</span><span class="st"> </span><span class="dv">4780</span>)</code></pre></div>
<pre><code>##   deployID tagID projectID status             tsStart               tsEnd
## 1    10517 22867       176   &lt;NA&gt; 2016-09-06 15:35:00 2017-05-18 15:35:00
##   deferSec speciesID bandNumber markerNumber markerType latitude longitude
## 1       NA      4780       &lt;NA&gt;   2641-20877 metal band 51.79861 -80.69139
##   elevation
## 1        NA
##                                                                                                                                                                                                                                                                                               comments
## 1 Sex:F, Age:HY, Bill28, Tarsus:26.2, Wing Chord:123, Wing Flat:129, Mass:57.7, Flag: (FEW)7P6, Blood:Y, Canada, Ontario, James Bay, LONGRIDGE, Comments: REKN tag on mesh; has a duplicate tag same burst rate 380-272 a HY REKN banded at Mingan Islands on 02-Oct-2016 and band number 9822-53171\n
##   id bi tsStartCode tsEndCode                               fullID
## 1 NA NA          1L        3L SampleData#272.1:5.3@166.38(M.22867)
##   motusTagDepID
## 1   22867.10517</code></pre>
<p><strong>Rappelez-vous que les corrections des métadonnées doivent être apportées en ligne.</strong></p>
</div>
</div>
<div id="recvMetadata" class="section level2">
<h2><span class="header-section-number">4.4</span> Vérification des métadonnées sur les récepteurs</h2>
<p>Il existe deux sources de métadonnées sur les récepteurs dans les données de détection Motus: les récepteurs enregistrés dans le cadre de votre projet et les récepteurs enregistrés dans le cadre de projets d’autres chercheurs. Vous pouvez accéder aux métadonnées sur tous les récepteurs du réseau, car les données négatives (par exemple, mon émetteur <em>n’a pas été</em> détecté à la station x même si cette station était active) sont souvent aussi importantes que les données positives. Cela vous permet aussi de connaître les positions où vos émetteurs ont été détectés par rapport à la répartition de l’ensemble des récepteurs partout dans le réseau Motus.</p>
<p>Les erreurs ou les omissions touchant les métadonnées sur les récepteurs que vous détectez dans votre fichier .motus peuvent être corrigées seulement pour les récepteurs enregistrés dans le cadre de votre propre projet.</p>
<p>Les utilisateurs de Motus sont encouragés à entrer des métadonnées sur les récepteurs complètes et exactes pour le bénéfice de l’ensemble des utilisateurs du réseau. Si vous prévoyez d’avoir besoin d’information spécifique sur le déploiement de récepteurs ou d’antennes à des stations déployées par d’autres chercheurs, vous pouvez utiliser le forum de Motus (<a href="https://motus.org/discussion/" class="uri">https://motus.org/discussion/</a>) pour demander que ces derniers enregistrent l’information sur le déploiement dont vous avez besoin. Vous devez indiquer avec précision l’information qui vous intéresse et indiquer également quand et où dans le réseau vos émetteurs seront déployés et éventuellement détectés. Ici, nous:</p>
<ol style="list-style-type: decimal">
<li>téléchargerons les métadonnées complètes sur les récepteurs dans l’ensemble du réseau;<br />
</li>
<li>déterminerons combien de récepteurs sont enregistrés dans le cadre de votre projet;</li>
<li>déterminerons à quel(s) moment(s) les récepteurs enregistrés dans le cadre de votre projet ont été déployés;</li>
<li>localiserons les récepteurs déployés dans tout le réseau et dans le cadre de votre projet;</li>
<li>vérifierons si les métadonnées sur les déploiements de récepteurs sont complètes et exactes.</li>
</ol>
<div id="telechargement-des-metadonnees-sur-tous-les-recepteurs-dans-le-reseau" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Téléchargement des métadonnées sur tous les récepteurs dans le réseau</h3>
<p>Plus loin dans le présent chapitre, nous produirons la carte indiquant la position de tous les récepteurs dans le réseau. Nous chargerons donc maintenant les métadonnées relatives à tous les projets plutôt que seulement celles propres au projet 176 comme nous l’avons fait précédemment. La fonction metadata() est décrite plus en détail dans la section <a href="accessingData.html#metadata">3.7.3</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">metadata</span>(sql.motus)</code></pre></div>
</div>
<div id="determination-du-nombre-de-recepteurs-deployes-dans-le-cadre-de-votre-projet" class="section level3">
<h3><span class="header-section-number">4.4.2</span> Détermination du nombre de récepteurs déployés dans le cadre de votre projet</h3>
<p>Pour savoir quels récepteurs déployés sont enregistrés dans le cadre de votre projet (s’il y en a), importez les données sur les déploiements et faites-en un sous-ensemble de données et un sommaire:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tbl.recvDeps &lt;-<span class="st"> </span><span class="kw">tbl</span>(sql.motus, <span class="st">&quot;recvDeps&quot;</span>)
df.projRecvs &lt;-<span class="st"> </span>tbl.recvDeps <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(projectID <span class="op">==</span><span class="st"> </span>
<span class="st">    </span>proj.num) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collect</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.data.frame</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">tsStart =</span> <span class="kw">as_datetime</span>(tsStart, <span class="dt">tz =</span> <span class="st">&quot;UTC&quot;</span>, 
        <span class="dt">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>), <span class="dt">tsEnd =</span> <span class="kw">as_datetime</span>(tsEnd, 
        <span class="dt">tz =</span> <span class="st">&quot;UTC&quot;</span>, <span class="dt">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>))

<span class="kw">summary</span>(df.projRecvs)</code></pre></div>
<pre><code>##     deployID       serno           receiverType          deviceID    
##  Min.   :1134   Length:29          Length:29          Min.   : 74.0  
##  1st Qu.:2289   Class :character   Class :character   1st Qu.:138.5  
##  Median :3101   Mode  :character   Mode  :character   Median :280.0  
##  Mean   :3007                                         Mean   :290.9  
##  3rd Qu.:4048                                         3rd Qu.:349.0  
##  Max.   :4222                                         Max.   :647.0  
##                                                       NA&#39;s   :2      
##   macAddress           status              name          
##  Length:29          Length:29          Length:29         
##  Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character  
##                                                          
##                                                          
##                                                          
##                                                          
##    siteName         fixtureType           latitude       longitude     
##  Length:29          Length:29          Min.   :51.15   Min.   :-80.80  
##  Class :character   Class :character   1st Qu.:51.29   1st Qu.:-80.57  
##  Mode  :character   Mode  :character   Median :51.48   Median :-80.45  
##                                        Mean   :51.51   Mean   :-80.35  
##                                        3rd Qu.:51.66   3rd Qu.:-80.12  
##                                        Max.   :51.88   Max.   :-79.69  
##                                        NA&#39;s   :4       NA&#39;s   :4       
##     isMobile         tsStart                   
##  Min.   :0.0000   Min.   :2014-07-12 00:00:00  
##  1st Qu.:0.0000   1st Qu.:2015-05-25 00:00:00  
##  Median :0.0000   Median :2016-05-18 00:00:00  
##  Mean   :0.1379   Mean   :2016-02-20 17:19:14  
##  3rd Qu.:0.0000   3rd Qu.:2017-05-16 15:55:00  
##  Max.   :1.0000   Max.   :2017-08-20 23:30:00  
##                                                
##      tsEnd                       projectID     elevation 
##  Min.   :2014-11-06 00:00:00   Min.   :176   Min.   :-7  
##  1st Qu.:2015-09-09 12:00:00   1st Qu.:176   1st Qu.:-4  
##  Median :2015-11-03 00:00:00   Median :176   Median :-4  
##  Mean   :2016-02-22 05:38:15   Mean   :176   Mean   : 3  
##  3rd Qu.:2016-11-29 12:00:00   3rd Qu.:176   3rd Qu.: 0  
##  Max.   :2017-08-20 23:30:00   Max.   :176   Max.   :30  
##  NA&#39;s   :6                                   NA&#39;s   :24</code></pre>
<p>Il y a 29 récepteurs déployés d’enregistrés dans le cadre du projet 176. Les valeurs de latitude et de longitude sont manquantes dans quatre cas et les valeurs des dates de fin sont manquantes dans six cas, ce qui porte à croire que les récepteurs en cause sont encore déployés.</p>
<p>L’opération suivante permet de conserver seulement les variables qui nous intéressent (en enlevant celles dont nous n’avons pas besoin) et structure les enregistrements restants par identifiant de récepteur, par latitude et par date de début:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df.projRecvs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">dateStart =</span> <span class="kw">date</span>(tsStart)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>serno, <span class="op">-</span>fixtureType, <span class="op">-</span>macAddress, <span class="op">-</span>tsStart, 
        <span class="op">-</span>tsEnd, <span class="op">-</span>elevation, <span class="op">-</span>projectID, <span class="op">-</span>status, <span class="op">-</span>receiverType, 
        <span class="op">-</span>siteName) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(deviceID, latitude, 
    dateStart)</code></pre></div>
<pre><code>##    deployID deviceID               name latitude longitude isMobile
## 1      3100       74         Washkaugou  51.1540  -79.8144        0
## 2      2291       75        North Bluff  51.4839  -80.4500        0
## 3      3102       75        North Bluff  51.4839  -80.4501        0
## 4      4051       75        North Bluff  51.4839  -80.4501        0
## 5      4221       75        North Bluff  51.4839  -80.4501        0
## 6      3103       78         Piskwamish  51.6579  -80.5678        0
## 7      4050       78         Piskwamish  51.6580  -80.5679        0
## 8      3101      199          Netitishi  51.2912  -80.1167        0
## 9      4052      199          Netitishi  51.2913  -80.1167        0
## 10     4222      261        North Bluff  51.4839  -80.4501        0
## 11     1140      261        North Bluff  51.4840  -80.4500        0
## 12     1134      280          Longridge  51.8230  -80.6911        0
## 13     2285      280          Longridge  51.8231  -80.6912        0
## 14     3097      280          Longridge  51.8244  -80.6909        0
## 15     4048      280      Halfway Point  51.8753  -80.7973        0
## 16     1135      285          Netitishi  51.2913  -80.1167        0
## 17     2289      285          Netitishi  51.2913  -80.1168        0
## 18     2290      324 Washiskougau Creek  51.1542  -79.8145        0
## 19     1136      324 Washiskougau Creek  51.1545  -79.8137        0
## 20     2286      349         Piskwamish  51.6578  -80.5676        0
## 21     1137      349         Piskwamish  51.6582  -80.5669        0
## 22     3814      527          LR mobile       NA        NA        1
## 23     3813      528          NP mobile       NA        NA        1
## 24     4001      528   BurntPointAerial       NA        NA        1
## 25     4002      528     JamesBayAerial       NA        NA        1
## 26     3099      609         East Point  51.2301  -79.7124        0
## 27     3098      647      Halfway Point  51.8752  -80.7973        0
## 28     4053       NA         East Point  51.3818  -79.6857        0
## 29     4049       NA          Longridge  51.8246  -80.6909        0
##     dateStart
## 1  2016-05-18
## 2  2015-05-25
## 3  2016-05-18
## 4  2017-05-17
## 5  2017-08-20
## 6  2016-05-18
## 7  2017-05-17
## 8  2016-05-18
## 9  2017-05-17
## 10 2017-08-20
## 11 2014-08-01
## 12 2014-07-16
## 13 2015-05-24
## 14 2016-05-17
## 15 2017-05-16
## 16 2014-07-12
## 17 2015-05-25
## 18 2015-05-25
## 19 2014-07-12
## 20 2015-05-24
## 21 2014-07-16
## 22 2015-07-07
## 23 2015-07-06
## 24 2016-07-19
## 25 2016-08-09
## 26 2016-05-18
## 27 2016-05-17
## 28 2017-05-18
## 29 2017-05-16</code></pre>
<p>Le nombre de récepteurs déployés indiqué dans les métadonnées devrait correspondre au nombre réellement déployé sur le terrain.</p>
<p>Si l’on examine les valeurs dans la colonne ‘isMobile’ qui correspondent aux quatre récepteurs déployés pour lesquels les valeurs de latitude et longitude sont manquantes, il est évident qu’il s’agit de récepteurs mobiles qui n’ont pas une position fixe (c.-à-d. qu’ils ont une valeur de 1). Étant donné que ces récepteurs sont mobiles, on ne s’attend pas à voir des coordonnées géographiques; l’indication demeure donc NA dans ces cas. Lorsque des coordonnées sont indiquées dans la table pour des récepteurs mobiles, celles-ci représentent le point de départ du déploiement.</p>
</div>
<div id="determination-du-moment-du-deploiement-des-recepteurs-dans-le-cadre-de-votre-projet" class="section level3">
<h3><span class="header-section-number">4.4.3</span> Détermination du moment du déploiement des récepteurs dans le cadre de votre projet</h3>
<p>L’information sur le moment des déploiements peut être affichée sous forme de graphique. Les lignes horizontales dans le graphique ci-dessous correspondent à l’intervalle de temps pendant lequel a été déployé chaque récepteur (deviceID) enregistré dans le cadre du Programme de suivi des oiseaux de rivage de la baie James (projet 176). Dans le cas des deux récepteurs pour lesquels la date de fin est manquante, le code attribue une date de fin arbitraire correspondant à la date de fin la plus éloignée parmi celles des autres récepteurs plus un mois. Sans cette opération, l’information sur les déploiements sans dates de fin ne serait pas affichée. Les périodes de déploiement d’un récepteur donné ne devraient pas se chevaucher dans le temps:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Mettez les données dans un format long pour</span>
<span class="co"># simplifier le pointage(ou utilisez geom_segment).</span>

df.projRecvs.long &lt;-<span class="st"> </span><span class="kw">select</span>(df.projRecvs, deviceID, 
    deployID, tsStart, tsEnd) <span class="op">%&gt;%</span><span class="st"> </span>tidyr<span class="op">::</span><span class="kw">gather</span>(when, 
    ts, <span class="kw">c</span>(tsStart, tsEnd)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">ts =</span> <span class="kw">if_else</span>(<span class="kw">is.na</span>(ts), 
    <span class="kw">max</span>(ts, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span><span class="kw">duration</span>(<span class="dv">1</span>, <span class="st">&quot;month&quot;</span>), ts))  <span class="co"># fake end date </span>

<span class="kw">ggplot</span>(df.projRecvs.long, <span class="kw">aes</span>(<span class="dt">y =</span> <span class="kw">as.factor</span>(deviceID), 
    <span class="dt">x =</span> ts, <span class="dt">colour =</span> <span class="kw">as.factor</span>(deployID))) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="dt">lwd =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span>
<span class="co"># Centrez plutôt sur la droite.</span>
<span class="kw">geom_text</span>(<span class="dt">data =</span> <span class="kw">filter</span>(df.projRecvs.long, when <span class="op">==</span><span class="st"> </span>
<span class="st">    &quot;tsStart&quot;</span>), <span class="kw">aes</span>(<span class="dt">label =</span> deployID), <span class="dt">hjust =</span> <span class="st">&quot;left&quot;</span>, 
    <span class="dt">nudge_y =</span> <span class="fl">0.2</span>, <span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">angle =</span> <span class="dv">45</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Receiver ID&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</code></pre></div>
<p><img src="FrMotusRBook_files/figure-html/projectRecvDeploy-1.png" width="672" /> Si vous voulez obtenir de l’information plus détaillée pour une année donnée (ou pour toutes les années), vous pouvez générer un sous-ensemble de données et pointer celles-ci de nouveau sur un graphique ou utiliser le jour de l’année sur l’axe des x et ensuite faire la synthèse par année (facet_wrap).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(df.projRecvs.long, <span class="kw">aes</span>(<span class="dt">y =</span> <span class="kw">as.factor</span>(deviceID), 
    <span class="dt">x =</span> <span class="kw">yday</span>(ts), <span class="dt">colour =</span> <span class="kw">as.factor</span>(deployID))) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">lwd =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span>
<span class="co"># Centrez les étiquettes sur la gauche.</span>
<span class="kw">geom_text</span>(<span class="dt">data =</span> <span class="kw">filter</span>(df.projRecvs.long, when <span class="op">==</span><span class="st"> </span>
<span class="st">    &quot;tsStart&quot;</span>), <span class="kw">aes</span>(<span class="dt">label =</span> deployID), <span class="dt">hjust =</span> <span class="st">&quot;left&quot;</span>, 
    <span class="dt">nudge_y =</span> <span class="fl">0.4</span>, <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Receiver ID&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Day of year&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">facet_grid</span>(<span class="kw">year</span>(ts) <span class="op">~</span><span class="st"> </span>., <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>)</code></pre></div>
<p><img src="FrMotusRBook_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="localisation-des-recepteurs-deployes" class="section level3">
<h3><span class="header-section-number">4.4.4</span> Localisation des récepteurs déployés</h3>
<p>Les cartes assurent une meilleure représentation spatiale que les simples graphiques. Les opérations suivantes permettent de pointer la position des récepteurs Motus sur une carte de l’Amérique du Nord. Les récepteurs déployés dans le cadre du projet 176 (Programme de suivi des oiseaux de rivage de la baie James) sont indiqués en rouge.</p>
<p><strong>a. Charger les métadonnées sur tous les récepteurs</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df.recvDeps &lt;-<span class="st"> </span>tbl.recvDeps <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collect</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.data.frame</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">tsStart =</span> <span class="kw">as_datetime</span>(tsStart, <span class="dt">tz =</span> <span class="st">&quot;UTC&quot;</span>, 
        <span class="dt">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>), <span class="dt">tsEnd =</span> <span class="kw">as_datetime</span>(tsEnd, 
        <span class="dt">tz =</span> <span class="st">&quot;UTC&quot;</span>, <span class="dt">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>))</code></pre></div>
<p><strong>b. Charger les fichiers des cartes de base</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">na.lakes &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="dt">map =</span> <span class="st">&quot;lakes&quot;</span>)
na.lakes &lt;-<span class="st"> </span><span class="kw">mutate</span>(na.lakes, <span class="dt">long =</span> long <span class="op">-</span><span class="st"> </span><span class="dv">360</span>)

<span class="co"># Include all of the Americas to begin</span>
na.map &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="dt">map =</span> <span class="st">&quot;world2&quot;</span>)
na.map &lt;-<span class="st"> </span><span class="kw">filter</span>(na.map, region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;USA&quot;</span>, 
    <span class="st">&quot;Mexico&quot;</span>, <span class="st">&quot;lakes&quot;</span>, <span class="st">&quot;Belize&quot;</span>, <span class="st">&quot;Costa Rica&quot;</span>, <span class="st">&quot;Panama&quot;</span>, 
    <span class="st">&quot;Guatemala&quot;</span>, <span class="st">&quot;Honduras&quot;</span>, <span class="st">&quot;Nicaragua&quot;</span>, <span class="st">&quot;El Salvador&quot;</span>, 
    <span class="st">&quot;Colombia&quot;</span>, <span class="st">&quot;Venezuela&quot;</span>, <span class="st">&quot;Ecuador&quot;</span>, <span class="st">&quot;Peru&quot;</span>, <span class="st">&quot;Brazil&quot;</span>, 
    <span class="st">&quot;Guyana&quot;</span>, <span class="st">&quot;Suriname&quot;</span>, <span class="st">&quot;Bolivia&quot;</span>, <span class="st">&quot;French Guiana&quot;</span>, 
    <span class="st">&quot;Jamaica&quot;</span>, <span class="st">&quot;Cuba&quot;</span>, <span class="st">&quot;Haiti&quot;</span>, <span class="st">&quot;Dominican Republic&quot;</span>, 
    <span class="st">&quot;The Bahamas&quot;</span>, <span class="st">&quot;Turks and Caicos Islands&quot;</span>, <span class="st">&quot;Puerto Rico&quot;</span>, 
    <span class="st">&quot;British Virgin Islands&quot;</span>, <span class="st">&quot;Montserrat&quot;</span>, <span class="st">&quot;Dominica&quot;</span>, 
    <span class="st">&quot;Saint Lucia&quot;</span>, <span class="st">&quot;Barbados&quot;</span>, <span class="st">&quot;Grenada&quot;</span>, <span class="st">&quot;Trinidad and Tobago&quot;</span>, 
    <span class="st">&quot;Chile&quot;</span>, <span class="st">&quot;Argentina&quot;</span>, <span class="st">&quot;Uruguay&quot;</span>, <span class="st">&quot;Paraguay&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(<span class="dt">long =</span> long <span class="op">-</span><span class="st"> </span><span class="dv">360</span>)</code></pre></div>
<p><strong>c. Pointer sur la carte la position des récepteurs dans les Amériques</strong> Carte montrant la position des récepteurs déployés dans l’ensemble du réseau (les «x» gris foncé) et des récepteurs déployés dans le cadre du Programme de suivi des oiseaux de rivage de la baie James (projet 176; les «x» rouges).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fixez des limites à la carte en fonction des</span>
<span class="co"># positions des détections, en vous assurant que la</span>
<span class="co"># carte englobe ces positions.</span>
xmin &lt;-<span class="st"> </span><span class="kw">min</span>(df.recvDeps<span class="op">$</span>longitude, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">-</span><span class="st"> </span>
<span class="st">    </span><span class="dv">2</span>
xmax &lt;-<span class="st"> </span><span class="op">-</span><span class="dv">20</span>  <span class="co"># Limitez aux Amériques (sauf quelques points en Europe).</span>
ymin &lt;-<span class="st"> </span><span class="op">-</span><span class="dv">60</span>  <span class="co">#min(df.recvDeps$longitude, na.rm = TRUE) - 2</span>
ymax &lt;-<span class="st"> </span><span class="kw">max</span>(df.recvDeps<span class="op">$</span>latitude, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span><span class="dv">2</span>

<span class="co"># map</span>
<span class="kw">ggplot</span>(na.lakes, <span class="kw">aes</span>(long, lat)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> na.map, 
    <span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group), <span class="dt">colour =</span> <span class="st">&quot;grey&quot;</span>, 
    <span class="dt">fill =</span> <span class="st">&quot;grey98&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="kw">aes</span>(<span class="dt">group =</span> group), 
    <span class="dt">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">&quot;mercator&quot;</span>, 
    <span class="dt">xlim =</span> <span class="kw">c</span>(xmin, xmax), <span class="dt">ylim =</span> <span class="kw">c</span>(ymin, ymax)) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">data =</span> df.recvDeps, 
    <span class="kw">aes</span>(longitude, latitude, <span class="dt">colour =</span> <span class="kw">as.logical</span>(projectID <span class="op">==</span><span class="st"> </span>
<span class="st">        </span><span class="dv">176</span>)), <span class="dt">cex =</span> <span class="fl">0.8</span>, <span class="dt">pch =</span> <span class="dv">4</span>) <span class="op">+</span><span class="st"> </span><span class="kw">scale_colour_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;grey30&quot;</span>, 
    <span class="st">&quot;red&quot;</span>), <span class="dt">name =</span> <span class="st">&quot;Project 176 Deployment&quot;</span>)</code></pre></div>
<p><img src="images/mapRecvs2.png" width="1650" style="display: block; margin: auto;" /></p>
<p><strong>d. Pointer sur la carte la position seulement des récepteurs déployés dans le cadre d’un projet</strong></p>
<p>Carte montrant la position des récepteurs déployés dans le cadre d’un projet. Les limites de la carte sur les axes des x (longitude) et des y (latitude) sont fixées à l’aide de la trame de données «df.projRecvs» qui a été créée précédemment. Seuls les récepteurs qui étaient actifs en 2016 figurent sur cette carte.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fixez des limites à la carte en fonction des positions des détections, en vous assurant que la carte englobe ces positions.</span>
xmin &lt;-<span class="st"> </span><span class="kw">min</span>(df.projRecvs<span class="op">$</span>longitude, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">-</span><span class="st"> </span><span class="dv">2</span>
xmax &lt;-<span class="st"> </span><span class="kw">max</span>(df.projRecvs<span class="op">$</span>longitude, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span><span class="dv">2</span>
ymin &lt;-<span class="st"> </span><span class="kw">min</span>(df.projRecvs<span class="op">$</span>latitude, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
ymax &lt;-<span class="st"> </span><span class="kw">max</span>(df.projRecvs<span class="op">$</span>latitude, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
                
<span class="co"># map</span>
<span class="kw">ggplot</span>(na.lakes, <span class="kw">aes</span>(long, lat))<span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> na.map, 
               <span class="kw">aes</span>(long, lat, <span class="dt">group=</span>group), <span class="dt">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;grey98&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="kw">aes</span>(<span class="dt">group =</span> group), <span class="dt">colour =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>(<span class="dt">projection=</span><span class="st">&quot;mercator&quot;</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(xmin, xmax), <span class="dt">ylim =</span> <span class="kw">c</span>(ymin, ymax)) <span class="op">+</span>
<span class="co">#  coord_map(projection=&quot;mercator&quot;, xlim = c(xmin, xmax), ylim = c(50.154, 52.875)) +</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> <span class="kw">filter</span>(df.projRecvs, 
                            <span class="kw">year</span>(tsStart) <span class="op">==</span><span class="st"> </span><span class="dv">2016</span>, 
                            <span class="op">!</span><span class="kw">is.na</span>(latitude)),  <span class="co"># remove mobile receivers</span>
             <span class="kw">aes</span>(longitude, latitude, <span class="dt">colour =</span> <span class="kw">as.factor</span>(deviceID)), <span class="dt">cex =</span> <span class="dv">2</span>, <span class="dt">pch =</span> <span class="dv">1</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">scale_colour_discrete</span>(<span class="dt">name  =</span>  <span class="st">&quot;Receiver ID&quot;</span>) </code></pre></div>
<p><img src="images/mapProjRecvs.png" width="1650" style="display: block; margin: auto;" /></p>
</div>
<div id="verification-de-la-completude-et-de-lexactitude-des-metadonnees-sur-les-deploiements-des-recepteurs" class="section level3">
<h3><span class="header-section-number">4.4.5</span> Vérification de la complétude et de l’exactitude des métadonnées sur les déploiements des récepteurs</h3>
<p>Les utilisateurs de Motus se préoccupent principalement de savoir si les métadonnées sur les déploiements des récepteurs qui ont détecté des signaux de leurs émetteurs sont complètes, parce que cela peut avoir un effet direct sur l’interprétation des données de ces détections. Par exemple, si les valeurs de latitude ou de longitude sont manquantes, on ne saura pas quelle était la position de l’émetteur dont les signaux ont été détectés. De même, si l’information sur le type et/ou l’orientation de l’antenne est manquante, cela peut empêcher de bien estimer l’orientation du déplacement de l’émetteur ou son cap au moment du départ de l’animal portant l’émetteur.</p>
<p>Dans de nombreux cas cependant, les métadonnées sur les déploiements des récepteurs <em>sans</em> information sur la détection des signaux des émetteurs peuvent quand même être utiles, par exemple pour estimer la probabilité de détection d’un animal qui passe dans la zone de détection d’une station réceptrice.</p>
<p>Dans la présente section, nous nous intéressons aux métadonnées sur les récepteurs enregistrés dans le cadre d’un projet particulier. Selon vos intérêts, les sommaires de métadonnées peuvent être appliqués à un plus grand groupe de récepteurs, par exemple à tous les récepteurs qui ont détecté des signaux d’émetteurs ou à tous les récepteurs dans une région déterminée (même s’ils n’ont pas détecté de signaux d’émetteurs).</p>
<p><strong>a. Chargement des données sur les récepteurs et les antennes</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Métadonnées sur TOUTES les antennes Motus</span>
<span class="co"># déployées; pour simplifier, conservez seulement</span>
<span class="co"># les variables d&#39;intérêt.</span>
tbl.antDeps &lt;-<span class="st"> </span><span class="kw">tbl</span>(sql.motus, <span class="st">&quot;antDeps&quot;</span>)
df.antDeps &lt;-<span class="st"> </span>tbl.antDeps <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(deployID, port, 
    antennaType, bearing, heightMeters) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collect</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">as.data.frame</span>()

<span class="co"># Métadonnées sur les récepteurs déployés;</span>
<span class="co"># conservez les variables d&#39;intérêt.</span>
df.recvDeps &lt;-<span class="st"> </span>df.recvDeps <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(deployID, receiverType, 
    deviceID, name, latitude, longitude, isMobile, 
    tsStart, tsEnd, projectID, elevation)

df.stationDeps &lt;-<span class="st"> </span><span class="kw">left_join</span>(df.recvDeps, df.antDeps, 
    <span class="dt">by =</span> <span class="st">&quot;deployID&quot;</span>)</code></pre></div>
<p>Faites de ces métadonnées un sous-ensemble des données sur les récepteurs enregistrés dans le cadre d’un projet:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df.stationDeps &lt;-<span class="st"> </span><span class="kw">filter</span>(df.stationDeps, projectID <span class="op">==</span><span class="st"> </span>
<span class="st">    </span>proj.num)</code></pre></div>
<p><strong>b. Examen de la gamme des valeurs des métadonnées</strong></p>
<p>Utilisez la fonction summary() pour avoir une idée générale de la distribution des variables dans les données.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(df.stationDeps)</code></pre></div>
<pre><code>##     deployID    receiverType          deviceID         name          
##  Min.   :1134   Length:91          Min.   : 74.0   Length:91         
##  1st Qu.:2289   Class :character   1st Qu.: 78.0   Class :character  
##  Median :3100   Mode  :character   Median :280.0   Mode  :character  
##  Mean   :2996                      Mean   :258.7                     
##  3rd Qu.:4049                      3rd Qu.:324.0                     
##  Max.   :4222                      Max.   :647.0                     
##                                    NA&#39;s   :6                         
##     latitude       longitude         isMobile      
##  Min.   :51.15   Min.   :-80.80   Min.   :0.00000  
##  1st Qu.:51.29   1st Qu.:-80.57   1st Qu.:0.00000  
##  Median :51.48   Median :-80.45   Median :0.00000  
##  Mean   :51.52   Mean   :-80.36   Mean   :0.04396  
##  3rd Qu.:51.66   3rd Qu.:-80.12   3rd Qu.:0.00000  
##  Max.   :51.88   Max.   :-79.69   Max.   :1.00000  
##  NA&#39;s   :4       NA&#39;s   :4                         
##     tsStart                        tsEnd                       projectID  
##  Min.   :2014-07-12 00:00:00   Min.   :2014-11-06 00:00:00   Min.   :176  
##  1st Qu.:2015-05-25 00:00:00   1st Qu.:2015-11-02 00:00:00   1st Qu.:176  
##  Median :2016-05-18 00:00:00   Median :2016-07-15 00:00:00   Median :176  
##  Mean   :2016-03-28 08:40:07   Mean   :2016-04-04 01:07:25   Mean   :176  
##  3rd Qu.:2017-05-16 19:42:00   3rd Qu.:2016-12-01 00:00:00   3rd Qu.:176  
##  Max.   :2017-08-20 23:30:00   Max.   :2017-08-20 23:30:00   Max.   :176  
##                                NA&#39;s   :21                                 
##    elevation           port       antennaType           bearing     
##  Min.   :-7.000   Min.   :1.000   Length:91          Min.   :  0.0  
##  1st Qu.:-4.000   1st Qu.:1.000   Class :character   1st Qu.: 50.0  
##  Median :-4.000   Median :2.000   Mode  :character   Median :145.0  
##  Mean   : 4.235   Mean   :2.231                      Mean   :152.6  
##  3rd Qu.: 0.000   3rd Qu.:3.000                      3rd Qu.:290.0  
##  Max.   :30.000   Max.   :4.000                      Max.   :357.5  
##  NA&#39;s   :74                                          NA&#39;s   :18     
##   heightMeters  
##  Min.   :4.800  
##  1st Qu.:5.600  
##  Median :5.800  
##  Mean   :5.832  
##  3rd Qu.:6.000  
##  Max.   :6.200  
##  NA&#39;s   :4</code></pre>
<p>Les valeurs de latitude et de longitude sont manquantes dans quatre cas associés au déploiement de récepteurs mobiles, comme nous l’avons vu précédemment.</p>
<p>Les valeurs d’élévation sont manquantes dans 74 enregistrements sur 91, mais il s’agit d’un champ de données dont le contenu n’est pas obligatoire. On peut estimer l’élévation à partir d’autres sources ou directement dans R (par exemple, voyez <a href="https://stackoverflow.com/questions/8973695/conversion-for-latitude-longitude-to-altitude-in-r" class="uri">https://stackoverflow.com/questions/8973695/conversion-for-latitude-longitude-to-altitude-in-r</a>).</p>
<p>Sur 91 enregistrements, les valeurs de l’angle de relèvement d’antenne sont manquantes dans 18 enregistrements et les valeurs de la hauteur d’antenne dans 4 enregistrements. Formez un sous-ensemble de données avec les enregistrements dans lesquels les valeurs de l’angle de relèvement d’antenne sont manquantes pour voir si cela peut être corrigé:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(df.stationDeps, <span class="kw">is.na</span>(bearing)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span>elevation, 
    <span class="op">-</span>deviceID, <span class="op">-</span>tsEnd)</code></pre></div>
<pre><code>##    deployID receiverType             name latitude longitude isMobile
## 1      3097  SENSORGNOME        Longridge  51.8244  -80.6909        0
## 2      3098  SENSORGNOME    Halfway Point  51.8752  -80.7973        0
## 3      3099  SENSORGNOME       East Point  51.2301  -79.7124        0
## 4      3100  SENSORGNOME       Washkaugou  51.1540  -79.8144        0
## 5      3101  SENSORGNOME        Netitishi  51.2912  -80.1167        0
## 6      3102  SENSORGNOME      North Bluff  51.4839  -80.4501        0
## 7      3103  SENSORGNOME       Piskwamish  51.6579  -80.5678        0
## 8      3813  LOTEKSRX800        NP mobile       NA        NA        1
## 9      3814  LOTEKSRX800        LR mobile       NA        NA        1
## 10     4001  LOTEKSRX800 BurntPointAerial       NA        NA        1
## 11     4002  LOTEKSRX800   JamesBayAerial       NA        NA        1
## 12     4048  SENSORGNOME    Halfway Point  51.8753  -80.7973        0
## 13     4049         &lt;NA&gt;        Longridge  51.8246  -80.6909        0
## 14     4050  SENSORGNOME       Piskwamish  51.6580  -80.5679        0
## 15     4051  SENSORGNOME      North Bluff  51.4839  -80.4501        0
## 16     4052  SENSORGNOME        Netitishi  51.2913  -80.1167        0
## 17     4221  SENSORGNOME      North Bluff  51.4839  -80.4501        0
## 18     4222  SENSORGNOME      North Bluff  51.4839  -80.4501        0
##                tsStart projectID port antennaType bearing heightMeters
## 1  2016-05-17 00:00:00       176    4   omni-whip      NA          6.0
## 2  2016-05-17 00:00:00       176    4   omni-whip      NA          6.0
## 3  2016-05-18 00:00:00       176    4   omni-whip      NA          6.0
## 4  2016-05-18 00:00:00       176    4   omni-whip      NA          6.0
## 5  2016-05-18 00:00:00       176    4   omni-whip      NA          6.0
## 6  2016-05-18 00:00:00       176    4   omni-whip      NA          6.0
## 7  2016-05-18 00:00:00       176    4   omni-whip      NA          6.0
## 8  2015-07-06 00:00:00       176    1      yagi-3      NA           NA
## 9  2015-07-07 00:00:00       176    1      yagi-3      NA           NA
## 10 2016-07-19 08:00:00       176    1      yagi-3      NA           NA
## 11 2016-08-09 07:15:00       176    1      yagi-3      NA           NA
## 12 2017-05-16 15:55:00       176    3   omni-whip      NA          6.2
## 13 2017-05-16 19:42:00       176    4   omni-whip      NA          6.2
## 14 2017-05-17 15:19:00       176    4   omni-whip      NA          6.2
## 15 2017-05-17 15:00:00       176    4   omni-whip      NA          6.2
## 16 2017-05-17 22:47:00       176    4   omni-whip      NA          6.2
## 17 2017-08-20 23:30:00       176    4   omni-whip      NA          6.2
## 18 2017-08-20 23:30:00       176    4   omni-whip      NA          6.2</code></pre>
<p>Il ressort que les stations réceptrices pour lesquelles les valeurs de l’angle de relèvement d’antenne sont manquantes sont limitées à celles dont les antennes sont omnidirectionnelles ou aux récepteurs mobiles, si bien que l’absence de valeurs est compréhensible. On constate aussi que les quatre enregistrements dans lesquels les valeurs de hauteur d’antenne sont manquantes sont également associés aux quatre récepteurs mobiles. Par conséquent, l’absence de valeurs de hauteur d’antenne est elle aussi compréhensible, et il n’est pas nécessaire d’apporter des corrections.</p>
<p>Rappelez-vous que les corrections relatives aux métadonnées manquantes doivent être apportées en ligne. Les métadonnées corrigées en ligne seront automatiquement corrigées dans vos fichiers de données de détection. Si vous avez déjà téléchargé vos données de détection, vous pouvez mettre à jour le fichier existant afin d’inclure les nouvelles métadonnées et données de détection (voyez les sections <a href="accessingData.html#forceMeta">3.7.2</a> et <a href="#tagmeUpdate"><strong>??</strong></a>).</p>
<p>Dans le prochain chapitre, nous examinerons nos données à la recherche de faux positifs et nous enlèverons les données de détection des signaux d’émetteurs ambigus.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="accessingData.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dataCleaning.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["FrMotusRBook.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
